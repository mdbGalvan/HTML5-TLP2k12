var BARLEY=BARLEY||{};BARLEY.View||(BARLEY.View={});BARLEY.Data||(BARLEY.Data={});BARLEY.App=function(a){return{init:function(){a.Init({})}}}(BARLEY);BARLEY.Core=function(){return{bind:function(a,d){return function(){return d.apply(a,toArray(arguments))}},environment:function(){var a;a=navigator.userAgent;a=a.toLowerCase();a=-1!=a.indexOf("iphone")||-1!=a.indexOf("symbianos")||-1!=a.indexOf("ipad")||-1!=a.indexOf("ipod")||-1!=a.indexOf("android")||-1!=a.indexOf("blackberry")||-1!=a.indexOf("samsung")||-1!=a.indexOf("nokia")||-1!=a.indexOf("windows ce")||-1!=a.indexOf("sonyericsson")||-1!=a.indexOf("webos")||-1!=a.indexOf("wap")||-1!=a.indexOf("motor")||
-1!=a.indexOf("symbian")?!0:!1;return{isMobile:a}}}}(BARLEY);BARLEY.Event=function(){var a=0,d=0,b=0,e=0,c=function(c,g,j){g=g||$(document);$(g).on("mousedown",function(c){a=c.clientX;d=Date.now()});$(g).on("mousemove",function(){});$(g).on("mouseup",function(g){b=g.clientX;e=Date.now();switch(c){case "swipeRight":a<b&&50<b-a&&j();break;case "swipeLeft":a>b&&50<a-b&&j();break;case "longTap":200<e-d&&j()}e=b=d=a=0})};return{tap:function(a,c){$(a).on("click",c)},doubleTap:function(a,c){$(a).on("dblclick",c)},longTap:function(a,b){c("longTap",a,b)},swipeRight:function(a,
b){c("swipeRight",a,b)},swipeLeft:function(a,b){c("swipeLeft",a,b)}}}(BARLEY);BARLEY.Nav=function(a){var d=null,b=null,e=null,c=[],f=function(c,f){$(".active").removeClass("active");null!==e&&"aside"!=f&&(e.addClass("hide"),d.removeClass("aside"),e=null);if("section"==f||"article"==f){var k="section"==f?$(c):$(c).closest("section"),m="section"==f?$(c+" article").first():$(c);d=$(".displayed");b=$(".current");d.attr("id")!=k.attr("id")&&(d.removeClass("displayed").removeClass("show").addClass("hide"),k.removeClass("hide").addClass("displayed").addClass("show"));b.attr("id")!=
m.attr("id")&&(b.removeClass("current").removeClass("show").addClass("hide"),m.removeClass("hide").addClass("current").addClass("show"));$('a[href="'+c+'"]').addClass("active")}else"aside"==f&&(null===e?(d=$(".displayed"),e=$(c),d.addClass("aside"),e.removeClass("hide").show()):(e.addClass("hide").hide(),d.removeClass("aside"),e=null));a.View.Config.render($(c));g(c,f);return!1},g=function(a,b){(0===c.length||c[c.length-1].name!=a)&&c.push({name:a,target:b})};return{init:function(){$("section").first().addClass("displayed");
$("section").first().find("article").first().addClass("current").show();this.initNavigation();a.View.Config.render($("section.displayed"));window.addEventListener("orientationchange",function(){a.View.Config.render($("section.displayed"))},!1);g("#"+$("section").first().attr("id"),"section")},initNavigation:function(a){a="undefined"!=typeof a?a+" ":"";$(a+'a[data-target="article"]').click(function(){var a=$(this).attr("href");f(a,"article")});$(a+'a[data-target="section"]').click(function(){var a=
$(this).attr("href");f(a,"section")});$(a+'a[data-target="aside"]').click(function(){var a=$(this).attr("href");f(a,"aside")});$(a+"aside a").click(function(){$("aside").addClass("hide")})},go:f,back:function(){if(0<c.length){c.pop();var a=c.pop();f(a.name,a.target)}}}}(BARLEY);BARLEY.Init=function(a){return function(){a.Nav.init()}}(BARLEY);BARLEY.Data.Cache=function(){var a=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},d=function(b,c){a()&&localStorage.setItem(b,JSON.stringify(c))},b=function(b){a()&&localStorage.removeItem(b)};return{get:function(b){if(a()){var c=null;try{c=JSON.parse(localStorage.getItem(b))}catch(d){return!1}return c?c:!1}},set:d,refresh:function(e,c){a()&&(b(e),d(e,c))},remove:b}}(BARLEY);BARLEY.View.List=function(a){return{append:function(d){var b=BARLEY.View.Template.render(d.template,d.data);$(d.element).append(b);a.Nav.initNavigation(d.element)}}}(BARLEY);BARLEY.View.Scroll=function(){var a=[],d=function(b,d){var c=$(b),f=null;"undefined"!==typeof c.attr("id")&&""!==c.attr("id")?f=idElement=c.attr("id"):(idElement="scroll"+a.length,f=a.length,c.attr("id",idElement));if(c=null!==f){var c=f,g=$("#"+c).width();$("#"+c).height();var j=$(document).width();$(document).height();$(".displayed header").height();$(".displayed footer").height();c=$("#"+c).hasClass("horizontal")?j<=g:!0}c&&(a[f]||(a[f]=new iScroll(idElement,{desktopCompatibility:!0,hScroll:d,
vScroll:!d,useTransition:!0,momentum:!0,lockDirection:!0,fixedScrollbar:!0,fadeScrollbar:!0,hideScrollbar:d})),a[f]&&a[f].scrollTo(0,0,250))};return{start:function(a,e){a?d(a,e):console.log("ERROR: Create scroll to: "+$(a).attr("id"))},refresh:function(a){d(a)}}}(BARLEY);BARLEY.View.Template=function(){return{render:function(a,d){var b=$('*[data-template="'+a+'"]').clone(),e=b.html(),c;for(c in d)e=e.replace(RegExp("{{"+c+"}}","g"),d[c]);b.html(e);b.show().removeAttr("data-template");return b}}}(BARLEY);BARLEY.View.Notification=function(a){var d=!1,b=!1,e=!1;return{alert:function(c,b){d||($("section.displayed").append('\t\t\t<div class="alert" data-template="alertNotification" style="display:none">\t\t\t\t<i class="{{icon}}"></i>\t\t\t\t<span>{{msg}}</span>\t\t\t</div>'),a.View.List.append({element:"section.displayed",template:"alertNotification",data:{msg:c,icon:b}}),d=!0,a.Event.tap(".alert",function(){a.View.Notification.close()}))},close:function(){d=!1;$(".alert").remove();b=!1;$(".confirm").remove();
e=!1;$(".actions").remove()},confirm:function(c,d,e,j){b||(b=!0,$("section.displayed").append('\t\t\t<div class="confirm"data-template="confirmNotification" style="display:none">\t\t\t\t<i class="{{icon}}"></i>\t\t\t\t<span>{{msg}}</span>\t\t\t\t<div class="buttons">\t\t\t\t\t<div class="button cancel">Cancel</div>\t\t\t\t\t<div class="button ok">Ok</div>\t\t\t\t</div>\t\t\t</div>'),a.View.List.append({element:"section.displayed",template:"confirmNotification",data:{msg:c,icon:d}}),a.Event.tap(".ok",
function(){e();a.View.Notification.close()}),a.Event.tap(".cancel",function(){"function"==typeof j&&j();a.View.Notification.close()}))},actions:function(){e||($("section.displayed").append('\t\t\t<div class="actions" data-template="actionsNotification" style="display:none">\t\t\t\t<div class="button cancel">Cancel</div>\t\t\t\t<div class="button ok">Ok</div>\t\t\t\t<div class="button">Other</div>\t\t\t</div>'),a.View.List.append({element:"section.displayed",template:"actionsNotification",data:{}}),
a.Event.tap(".actions .button",function(){a.View.Notification.close()}))}}}(BARLEY);BARLEY.View.Config=function(a){var d=function(b){b.hasClass(".scrollable")?a.View.Scroll.start(b.children(),b.hasClass("horizontal")):$.each(b.find(".scrollable"),function(){$(this).children().addClass("scrollableElement");a.View.Scroll.start($(this).children(),$(this).hasClass("horizontal"))})};return{render:function(a){var e=null!==$(a).find("footer").height()?$(a).find("footer").height()+10+"px":"10px";$("article.current").css("bottom",e);d(a)}}}(BARLEY);(function(){function a(h,a){var i;this.element="object"==typeof h?h:document.getElementById(h);this.wrapper=this.element.parentNode;this.element.style.webkitTransitionProperty="-webkit-transform";this.element.style.webkitTransitionTimingFunction="cubic-bezier(0,0,0.25,1)";this.element.style.webkitTransitionDuration="0";this.element.style.webkitTransform=l+"0,0"+k;this.options={bounce:b,momentum:b,checkDOMChanges:!0,topOnDOMChanges:!1,hScrollbar:b,vScrollbar:b,fadeScrollbar:e||!c,shrinkScrollbar:e||
!c,desktopCompatibility:!1,overflow:"auto",snap:!1,bounceLock:!1,scrollbarColor:"rgba(0,0,0,0.5)",onScrollEnd:function(){}};if("object"==typeof a)for(i in a)this.options[i]=a[i];this.options.desktopCompatibility&&(this.options.overflow="hidden");this.onScrollEnd=this.options.onScrollEnd;delete this.options.onScrollEnd;this.wrapper.style.overflow=this.options.overflow;this.refresh();window.addEventListener("onorientationchange"in window?"orientationchange":"resize",this,!1);if(c||this.options.desktopCompatibility)this.element.addEventListener(f,
this,!1),this.element.addEventListener(g,this,!1),this.element.addEventListener(j,this,!1);this.options.checkDOMChanges&&this.element.addEventListener("DOMSubtreeModified",this,!1)}function d(h,a,c,b,d){var e=document;this.dir=h;this.fade=c;this.shrink=b;this.uid=++m;this.bar=e.createElement("div");this.bar.style.cssText="position:absolute;top:0;left:0;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;-webkit-transition-duration:0;-webkit-transition-delay:0;-webkit-transition-property:-webkit-transform;z-index:10;background:"+
d+";-webkit-transform:"+l+"0,0"+k+";"+("horizontal"==h?"-webkit-border-radius:3px 2px;min-width:6px;min-height:5px":"-webkit-border-radius:2px 3px;min-width:5px;min-height:6px");this.wrapper=e.createElement("div");this.wrapper.style.cssText="-webkit-mask:-webkit-canvas(scrollbar"+this.uid+this.dir+");position:absolute;z-index:10;pointer-events:none;overflow:hidden;opacity:0;-webkit-transition-duration:"+(c?"300ms":"0")+";-webkit-transition-delay:0;-webkit-transition-property:opacity;"+("horizontal"==
this.dir?"bottom:2px;left:2px;right:7px;height:5px":"top:2px;right:2px;bottom:7px;width:5px;");this.wrapper.appendChild(this.bar);a.appendChild(this.wrapper)}a.prototype={x:0,y:0,enabled:!0,handleEvent:function(h){switch(h.type){case f:this.touchStart(h);break;case g:this.touchMove(h);break;case j:this.touchEnd(h);break;case "webkitTransitionEnd":this.transitionEnd();break;case "orientationchange":case "resize":this.refresh();break;case "DOMSubtreeModified":this.onDOMModified(h)}},onDOMModified:function(h){var a=
this;h.target.parentNode==a.element&&(setTimeout(function(){a.refresh()},0),a.options.topOnDOMChanges&&(0!=a.x||0!=a.y)&&a.scrollTo(0,0,"0"))},refresh:function(){var h=this.x,a=this.y;this.scrollWidth=this.wrapper.clientWidth;this.scrollHeight=this.wrapper.clientHeight;this.scrollerWidth=this.element.offsetWidth;this.scrollerHeight=this.element.offsetHeight;this.maxScrollX=this.scrollWidth-this.scrollerWidth;this.maxScrollY=this.scrollHeight-this.scrollerHeight;this.directionY=this.directionX=0;this.scrollX&&
(0<=this.maxScrollX?h=0:this.x<this.maxScrollX&&(h=this.maxScrollX));this.scrollY&&(0<=this.maxScrollY?a=0:this.y<this.maxScrollY&&(a=this.maxScrollY));this.options.snap&&(this.maxPageX=-Math.floor(this.maxScrollX/this.scrollWidth),this.maxPageY=-Math.floor(this.maxScrollY/this.scrollHeight),a=this.snap(h,a),h=a.x,a=a.y);if(h!=this.x||a!=this.y)this.setTransitionTime("0"),this.setPosition(h,a,!0);this.scrollX=this.scrollerWidth>this.scrollWidth;this.scrollY=!this.options.bounceLock&&!this.scrollX||
this.scrollerHeight>this.scrollHeight;this.options.hScrollbar&&this.scrollX?(this.scrollBarX=this.scrollBarX||new d("horizontal",this.wrapper,this.options.fadeScrollbar,this.options.shrinkScrollbar,this.options.scrollbarColor),this.scrollBarX.init(this.scrollWidth,this.scrollerWidth)):this.scrollBarX&&(this.scrollBarX=this.scrollBarX.remove());this.options.vScrollbar&&this.scrollY&&this.scrollerHeight>this.scrollHeight?(this.scrollBarY=this.scrollBarY||new d("vertical",this.wrapper,this.options.fadeScrollbar,
this.options.shrinkScrollbar,this.options.scrollbarColor),this.scrollBarY.init(this.scrollHeight,this.scrollerHeight)):this.scrollBarY&&(this.scrollBarY=this.scrollBarY.remove())},setPosition:function(a,c,b){this.x=a;this.y=c;this.element.style.webkitTransform=l+this.x+"px,"+this.y+"px"+k;b||(this.scrollBarX&&this.scrollBarX.setPosition(this.x),this.scrollBarY&&this.scrollBarY.setPosition(this.y))},setTransitionTime:function(a){a=a||"0";this.element.style.webkitTransitionDuration=a;this.scrollBarX&&
(this.scrollBarX.bar.style.webkitTransitionDuration=a,this.scrollBarX.wrapper.style.webkitTransitionDuration=b&&this.options.fadeScrollbar?"300ms":"0");this.scrollBarY&&(this.scrollBarY.bar.style.webkitTransitionDuration=a,this.scrollBarY.wrapper.style.webkitTransitionDuration=b&&this.options.fadeScrollbar?"300ms":"0")},touchStart:function(a){var b;if(this.enabled){a.preventDefault();a.stopPropagation();this.scrolling=!0;this.moved=!1;this.distY=this.distX=0;this.setTransitionTime("0");if(this.options.momentum||
this.options.snap)if(b=new WebKitCSSMatrix(window.getComputedStyle(this.element).webkitTransform),b.e!=this.x||b.f!=this.y)document.removeEventListener("webkitTransitionEnd",this,!1),this.setPosition(b.e,b.f),this.moved=!0;this.touchStartX=c?a.changedTouches[0].pageX:a.pageX;this.scrollStartX=this.x;this.touchStartY=c?a.changedTouches[0].pageY:a.pageY;this.scrollStartY=this.y;this.scrollStartTime=a.timeStamp;this.directionY=this.directionX=0}},touchMove:function(a){if(this.scrolling){var b=c?a.changedTouches[0].pageX:
a.pageX,i=c?a.changedTouches[0].pageY:a.pageY,d=this.scrollX?b-this.touchStartX:0,e=this.scrollY?i-this.touchStartY:0,f=this.x+d,g=this.y+e;a.stopPropagation();this.touchStartX=b;this.touchStartY=i;if(0<=f||f<this.maxScrollX)f=this.options.bounce?Math.round(this.x+d/3):0<=f||0<=this.maxScrollX?0:this.maxScrollX;if(0<=g||g<this.maxScrollY)g=this.options.bounce?Math.round(this.y+e/3):0<=g||0<=this.maxScrollY?0:this.maxScrollY;5<this.distX+this.distY?(this.distX-3>this.distY?(g=this.y,e=0):this.distY-
3>this.distX&&(f=this.x,d=0),this.setPosition(f,g),this.moved=!0,this.directionX=0<d?-1:1,this.directionY=0<e?-1:1):(this.distX+=Math.abs(d),this.distY+=Math.abs(e))}},touchEnd:function(a){if(this.scrolling){var b=a.timeStamp-this.scrollStartTime,i=c?a.changedTouches[0]:a,d,e;d=0;e=this.x;var f=this.y;this.scrolling=!1;if(this.moved)!this.options.snap&&250<b?this.resetPosition():(this.options.momentum&&(a=!0===this.scrollX?this.momentum(this.x-this.scrollStartX,b,this.options.bounce?-this.x+this.scrollWidth/
5:-this.x,this.options.bounce?this.x+this.scrollerWidth-this.scrollWidth+this.scrollWidth/5:this.x+this.scrollerWidth-this.scrollWidth):{dist:0,time:0},i=!0===this.scrollY?this.momentum(this.y-this.scrollStartY,b,this.options.bounce?-this.y+this.scrollHeight/5:-this.y,this.options.bounce?(0>this.maxScrollY?this.y+this.scrollerHeight-this.scrollHeight:0)+this.scrollHeight/5:this.y+this.scrollerHeight-this.scrollHeight):{dist:0,time:0},d=Math.max(Math.max(a.time,i.time),1),e=this.x+a.dist,f=this.y+
i.dist),this.options.snap&&(a=this.snap(e,f),e=a.x,f=a.y,d=Math.max(a.time,d)),this.scrollTo(e,f,d+"ms"));else if(this.resetPosition(),c){for(d=i.target;1!=d.nodeType;)d=d.parentNode;e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,a.view,1,i.screenX,i.screenY,i.clientX,i.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);e._fake=!0;d.dispatchEvent(e)}}},transitionEnd:function(){document.removeEventListener("webkitTransitionEnd",this,!1);this.resetPosition()},resetPosition:function(){var a=
this.x,b=this.y;0<=this.x?a=0:this.x<this.maxScrollX&&(a=this.maxScrollX);0<=this.y||0<this.maxScrollY?b=0:this.y<this.maxScrollY&&(b=this.maxScrollY);a!=this.x||b!=this.y?this.scrollTo(a,b):(this.moved&&(this.onScrollEnd(),this.moved=!1),this.scrollBarX&&this.scrollBarX.hide(),this.scrollBarY&&this.scrollBarY.hide())},snap:function(a,b){var c,a=0<this.directionX?Math.floor(a/this.scrollWidth):0>this.directionX?Math.ceil(a/this.scrollWidth):Math.round(a/this.scrollWidth);this.pageX=-a;a*=this.scrollWidth;
0<a?a=this.pageX=0:a<this.maxScrollX&&(this.pageX=this.maxPageX,a=this.maxScrollX);b=0<this.directionY?Math.floor(b/this.scrollHeight):0>this.directionY?Math.ceil(b/this.scrollHeight):Math.round(b/this.scrollHeight);this.pageY=-b;b*=this.scrollHeight;0<b?b=this.pageY=0:b<this.maxScrollY&&(this.pageY=this.maxPageY,b=this.maxScrollY);c=Math.round(Math.max(500*(Math.abs(this.x-a)/this.scrollWidth),500*(Math.abs(this.y-b)/this.scrollHeight)));return{x:a,y:b,time:c}},scrollTo:function(a,b,c){this.x==a&&
this.y==b?this.resetPosition():(this.moved=!0,this.setTransitionTime(c||"350ms"),this.setPosition(a,b),"0"===c||"0s"==c||"0ms"==c?this.resetPosition():document.addEventListener("webkitTransitionEnd",this,!1))},scrollToPage:function(a,b,c){this.options.snap||(this.pageX=-Math.round(this.x/this.scrollWidth),this.pageY=-Math.round(this.y/this.scrollHeight));"next"==a?a=++this.pageX:"prev"==a&&(a=--this.pageX);"next"==b?b=++this.pageY:"prev"==b&&(b=--this.pageY);a=-a*this.scrollWidth;b=-b*this.scrollHeight;
b=this.snap(a,b);a=b.x;b=b.y;this.scrollTo(a,b,c||"500ms")},scrollToElement:function(a,b){if(a="object"==typeof a?a:this.element.querySelector(a)){var c=this.scrollX?-a.offsetLeft:0,d=this.scrollY?-a.offsetTop:0;0<=c?c=0:c<this.maxScrollX&&(c=this.maxScrollX);0<=d?d=0:d<this.maxScrollY&&(d=this.maxScrollY);this.scrollTo(c,d,b)}},momentum:function(a,b,c,d){var b=1E3*(Math.abs(a)/b),e=b*b/2.5/1E3,f=0;0<a&&e>c?(b=b*c/e/2.5,e=c):0>a&&e>d&&(b=b*d/e/2.5,e=d);f=b/1.2;return{dist:Math.round(e*(0>a?-1:1)),
time:Math.round(f)}},destroy:function(a){window.removeEventListener("onorientationchange"in window?"orientationchange":"resize",this,!1);this.element.removeEventListener(f,this,!1);this.element.removeEventListener(g,this,!1);this.element.removeEventListener(j,this,!1);document.removeEventListener("webkitTransitionEnd",this,!1);this.options.checkDOMChanges&&this.element.removeEventListener("DOMSubtreeModified",this,!1);this.scrollBarX&&(this.scrollBarX=this.scrollBarX.remove());this.scrollBarY&&(this.scrollBarY=
this.scrollBarY.remove());a&&this.wrapper.parentNode.removeChild(this.wrapper);return null}};d.prototype={init:function(a,b){var c=document,d=Math.PI;"horizontal"==this.dir?this.maxSize!=this.wrapper.offsetWidth&&(this.maxSize=this.wrapper.offsetWidth,c=c.getCSSCanvasContext("2d","scrollbar"+this.uid+this.dir,this.maxSize,5),c.fillStyle="rgb(0,0,0)",c.beginPath(),c.arc(2.5,2.5,2.5,d/2,-d/2,!1),c.lineTo(this.maxSize-2.5,0),c.arc(this.maxSize-2.5,2.5,2.5,-d/2,d/2,!1),c.closePath(),c.fill()):this.maxSize!=
this.wrapper.offsetHeight&&(this.maxSize=this.wrapper.offsetHeight,c=c.getCSSCanvasContext("2d","scrollbar"+this.uid+this.dir,5,this.maxSize),c.fillStyle="rgb(0,0,0)",c.beginPath(),c.arc(2.5,2.5,2.5,d,0,!1),c.lineTo(5,this.maxSize-2.5),c.arc(2.5,this.maxSize-2.5,2.5,0,d,!1),c.closePath(),c.fill());this.size=Math.max(Math.round(this.maxSize*this.maxSize/b),6);this.maxScroll=this.maxSize-this.size;this.toWrapperProp=this.maxScroll/(a-b);this.bar.style["horizontal"==this.dir?"width":"height"]=this.size+
"px"},setPosition:function(a){"1"!=this.wrapper.style.opacity&&this.show();a=Math.round(this.toWrapperProp*a);0>a?(a=this.shrink?a+3*a:0,7>this.size+a&&(a=-this.size+6)):a>this.maxScroll&&(a=this.shrink?a+3*(a-this.maxScroll):this.maxScroll,7>this.size+this.maxScroll-a&&(a=this.size+this.maxScroll-6));a="horizontal"==this.dir?l+a+"px,0"+k:l+"0,"+a+"px"+k;this.bar.style.webkitTransform=a},show:function(){b&&(this.wrapper.style.webkitTransitionDelay="0");this.wrapper.style.opacity="1"},hide:function(){b&&
(this.wrapper.style.webkitTransitionDelay="350ms");this.wrapper.style.opacity="0"},remove:function(){this.wrapper.parentNode.removeChild(this.wrapper);return null}};var b="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,e=/iphone|ipad/gi.test(navigator.appVersion),c="ontouchstart"in window,f=c?"touchstart":"mousedown",g=c?"touchmove":"mousemove",j=c?"touchend":"mouseup",l="translate"+(b?"3d(":"("),k=b?",0)":")",m=0;window.iScroll=a})();
